<!doctype html>
<html lang="id" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Special Gift for You ‚ù§Ô∏è</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Outfit:wght@300;400;600&family=Playfair+Display:ital,wght@0,600;1,600&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "romantic-pink": "#FF8FAB",
              "romantic-dark": "#C75B7A",
              "soft-cream": "#FFF5F8",
              "angpao-red": "#D32F2F",
              "angpao-gold": "#FFD700",
            },
            fontFamily: {
              heading: ['"Playfair Display"', "serif"],
              hand: ['"Dancing Script"', "cursive"],
              body: ['"Outfit"', "sans-serif"],
            },
            animation: {
              "gradient-x": "gradient-x 10s ease infinite",
              float: "float 6s ease-in-out infinite",
              "float-slow": "float 8s ease-in-out infinite",
              pulse: "pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              "gradient-x": {
                "0%, 100%": { "background-position": "0% 50%" },
                "50%": { "background-position": "100% 50%" },
              },
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-15px)" },
              },
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      @layer utilities {
        /* Glassmorphism Premium */
        .glass-card {
          background-color: rgba(255, 255, 255, 0.4);
          backdrop-filter: blur(80px);
          border: 1px solid rgba(255, 255, 255, 0.6);
          box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
          border-radius: 2.5rem;
        }
        .envelope-flap {
          clip-path: polygon(0 0, 50% 100%, 100% 0);
        }
        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      }

      /* Background Pattern */
      .bg-pattern {
        background-color: #ffffff;
        background-image:
          radial-gradient(#db2777 0.5px, transparent 0.5px),
          radial-gradient(#db2777 0.5px, #ffffff 0.5px);
        background-size: 20px 20px;
        background-position:
          0 0,
          10px 10px;
        opacity: 0.1;
      }

      /* Tape Effect for Photo */
      .washi-tape {
        background-color: rgba(255, 255, 255, 0.4);
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(2px);
      }
    </style>
  </head>

  <body
    class="font-body min-h-screen bg-gradient-to-tr from-pink-100 via-purple-100 to-indigo-100 overflow-hidden relative flex items-center justify-center p-4 selection:bg-romantic-pink selection:text-white"
  >
    <div class="fixed inset-0 z-0 pointer-events-none">
      <div class="absolute top-0 left-0 w-full h-full bg-pattern"></div>
      <div
        class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float"
      ></div>
      <div
        class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-float-slow"
      ></div>
    </div>

    <div
      id="start-screen"
      class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/30 backdrop-blur-sm p-4 transition-all duration-700"
    >
      <div
        onclick="openAngpao()"
        class="relative cursor-pointer group animate-float w-[280px] md:w-[320px] aspect-[3/4] transition-transform duration-300 hover:scale-105 active:scale-95"
      >
        <div
          class="absolute inset-0 bg-gradient-to-b from-red-600 to-red-800 rounded-2xl shadow-[0_25px_60px_-12px_rgba(0,0,0,0.5)] border border-red-900 flex flex-col items-center justify-end pb-[20%] overflow-hidden"
        >
          <div
            class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"
          ></div>

          <div
            class="absolute inset-3 border-2 border-yellow-400/50 rounded-xl pointer-events-none"
          ></div>

          <h1
            class="font-heading text-3xl md:text-4xl text-yellow-300 font-bold mb-1 drop-shadow-lg tracking-wide"
          >
            For You
          </h1>
          <p
            class="text-white/90 text-xs font-medium tracking-[0.3em] uppercase opacity-80 group-hover:opacity-100 transition-opacity"
          >
            Tap to Open
          </p>
        </div>

        <div
          class="absolute top-0 left-0 w-full h-[38%] bg-gradient-to-b from-red-700 to-red-600 envelope-flap shadow-lg z-10 origin-top transition-all duration-500 group-hover:rotate-x-12 border-t border-red-500"
        ></div>

        <div
          class="absolute top-[33%] left-1/2 transform -translate-x-1/2 z-20"
        >
          <div
            class="w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-yellow-300 via-yellow-500 to-yellow-600 rounded-full border-4 border-yellow-100/50 shadow-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"
          >
            <span class="text-red-900 font-bold text-xl md:text-2xl">‚ù§Ô∏è</span>
          </div>
        </div>
      </div>
    </div>

    <div
      id="main-content"
      class="hidden relative glass-card w-full max-w-lg p-6 md:p-8 my-4 text-center transform transition-all duration-1000 translate-y-20 opacity-0 z-10"
    >
      <div class="absolute -top-5 left-1/2 transform -translate-x-1/2 z-30">
        <button
          id="music-btn"
          class="flex items-center gap-3 bg-white hover:bg-pink-50 text-romantic-dark font-semibold py-2 px-5 rounded-full transition-all shadow-lg hover:shadow-xl border border-pink-100 group"
        >
          <span
            class="animate-spin-slow group-hover:scale-110 transition-transform"
            >üíø</span
          >
          <span id="music-status" class="text-xs uppercase tracking-widest"
            >Play Music</span
          >
        </button>
        <audio id="bg-music" loop>
          <source src="assets/Feast - Nina.mp3" type="audio/mpeg" />
        </audio>
      </div>

      <div
        class="relative w-[260px] aspect-[3/4] mx-auto mt-10 mb-8 group perspective-1000"
      >
        <div
          class="absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-6 washi-tape rotate-[-2deg] z-20 opacity-80"
        ></div>

        <div
          class="relative h-full w-full bg-white p-3 pb-12 rounded-lg shadow-[0_10px_40px_-10px_rgba(0,0,0,0.2)] rotate-2 group-hover:rotate-0 transition-all duration-700 ease-out"
        >
          <div
            class="w-full h-full overflow-hidden rounded-sm bg-gray-100 relative"
          >
            <div
              class="absolute inset-0 flex items-center justify-center text-gray-300"
            >
              <svg
                class="w-10 h-10 animate-spin"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
            </div>
            <img
              id="slideshow"
              src="assets/foto1.jpg"
              alt="Our Memories"
              class="relative w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
            />
          </div>
          <div class="absolute bottom-3 left-0 w-full text-center">
            <span class="font-hand text-gray-400 text-xl">Us ‚ù§Ô∏è</span>
          </div>
        </div>
      </div>

      <div class="min-h-[100px] flex items-center justify-center mb-6 px-1">
        <p
          class="font-heading text-xl md:text-2xl text-gray-700 leading-relaxed drop-shadow-sm"
        >
          <span id="typing-text"></span>
          <span class="animate-pulse text-romantic-pink">|</span>
        </p>
      </div>

      <div class="py-6 italic">
        <p class="font-hand text-2xl md:text-3xl text-romantic-dark">
          "The world is a better place since you were born. Thank you for being
          you."
        </p>
        <div class="mt-4 flex justify-center gap-4">
          <span class="text-2xl animate-bounce">‚ú®</span>
          <span class="text-2xl animate-bounce" style="animation-delay: 0.2s"
            >üíñ</span
          >
          <span class="text-2xl animate-bounce" style="animation-delay: 0.4s"
            >‚ú®</span
          >
        </div>
      </div>

      <p class="text-gray-400 text-[10px] mt-2 font-body tracking-wider">
        Made with ‚ù§Ô∏è specifically for you.
      </p>
    </div>

    <script>
      // --- KONFIGURASI ---
      const config = {
        birthDate: "2000-05-20",
        typingMessage:
          "Happy Birthday, Cantik! üéâ Semoga di umur yang baru ini kamu makin bahagia. Semoga luka masalalu sembuh & senyummu makin manis. Makasih udah datang di hidupku. I Love You! ‚ù§Ô∏è",
        photos: [
          "assets/foto1.png",
          "assets/foto2.png",
          "assets/foto6.png",
          "assets/foto8.png",
          "assets/foto3.png",
          "assets/foto7.png",
          "assets/foto5.png",
          // Pastikan nama file sesuai!
        ],
      };

      // --- LOGIC ---

      // 1. Buka Angpao
      function openAngpao() {
        const startScreen = document.getElementById("start-screen");
        startScreen.classList.add("opacity-0", "scale-150");
        setTimeout(() => {
          startScreen.remove();
          unlockContent();
        }, 500);
      }

      // 2. Unlock Konten
      function unlockContent() {
        const mainContent = document.getElementById("main-content");
        mainContent.classList.remove("hidden");
        // Trigger reflow
        void mainContent.offsetWidth;
        mainContent.classList.remove("translate-y-20", "opacity-0");

        toggleMusic(true);
        startConfetti();
        startTyping();
        startSlideshow();
        setInterval(updateCountdown, 1000);
      }

      // 3. Confetti Premium
      function startConfetti() {
        var duration = 3 * 1000;
        var end = Date.now() + duration;

        (function frame() {
          confetti({
            particleCount: 5,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: ["#FF8FAB", "#FFD700", "#ffffff"],
          });
          confetti({
            particleCount: 5,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: ["#FF8FAB", "#FFD700", "#ffffff"],
          });

          if (Date.now() < end) {
            requestAnimationFrame(frame);
          }
        })();
      }

      // 4. Music Logic
      const audio = document.getElementById("bg-music");
      const musicBtn = document.getElementById("music-btn");
      const musicStatus = document.getElementById("music-status");
      let isPlaying = false;

      function toggleMusic(forcePlay = false) {
        if (forcePlay || !isPlaying) {
          audio
            .play()
            .then(() => {
              isPlaying = true;
              musicStatus.innerText = "Pause";
              musicBtn.classList.add("ring-2", "ring-pink-300");
            })
            .catch(() => console.log("Autoplay blocked"));
        } else {
          audio.pause();
          isPlaying = false;
          musicStatus.innerText = "Play Music";
          musicBtn.classList.remove("ring-2", "ring-pink-300");
        }
      }
      musicBtn.addEventListener("click", () => toggleMusic());

      // 5. Typing Effect
      let typeIndex = 0;
      function startTyping() {
        if (typeIndex < config.typingMessage.length) {
          document.getElementById("typing-text").innerHTML +=
            config.typingMessage.charAt(typeIndex);
          typeIndex++;
          setTimeout(startTyping, 50); // Kecepatan ngetik
        } else {
          document.querySelector(".animate-pulse.text-romantic-pink").remove();
        }
      }

      // 6. Slideshow Logic
      let photoIndex = 0;
      function startSlideshow() {
        const imgElement = document.getElementById("slideshow");
        imgElement.src = config.photos[0];

        setInterval(() => {
          photoIndex = (photoIndex + 1) % config.photos.length;
          imgElement.classList.add("opacity-0", "scale-95"); // Efek fade out + zoom out dikit
          setTimeout(() => {
            imgElement.src = config.photos[photoIndex];
            imgElement.classList.remove("opacity-0", "scale-95");
          }, 500);
        }, 4000);
      }

      // 7. Countdown Logic
      function updateCountdown() {
        const diff = new Date() - new Date(config.birthDate);
        const vals = {
          Hari: Math.floor(diff / (1000 * 60 * 60 * 24)),
          Jam: Math.floor((diff / (1000 * 60 * 60)) % 24),
          Menit: Math.floor((diff / 1000 / 60) % 60),
          Detik: Math.floor((diff / 1000) % 60),
        };

        document.getElementById("countdown").innerHTML = Object.entries(vals)
          .map(
            ([k, v]) => `
            <div class="flex flex-col items-center bg-white/60 backdrop-blur-sm rounded-2xl p-2 shadow-sm border border-white/50 transition-all hover:-translate-y-1 hover:shadow-md">
                <span class="text-xl md:text-2xl font-bold text-gray-800 font-body">${v}</span>
                <span class="text-[9px] md:text-[10px] text-romantic-dark uppercase tracking-wider font-bold mt-1">${k}</span>
            </div>
        `,
          )
          .join("");
      }
    </script>
  </body>
</html>
